/*
 green-turtle version 1.3.0 Copyright (c) 2011-2014, R. Alexander Milowski <alex@milowski.com> All rights reserved. */
if("undefined"==typeof GreenTurtle)var GreenTurtle=function(){function A(){}function m(a){this.target=a?a:{graph:{subjects:{},prefixes:{},terms:{}}};this.theOne="_:"+(new Date).getTime();this.vocabulary=this.language=null;this.blankCounter=0;this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"}];this.inXHTMLMode=!1;this.absURIRE=/[\w\_\-]+:\S+/;this.finishedHandlers=[];this.init()}function E(){var a=this;this.curieParser={trim:function(a){return a.replace(/^\s\s*/,
"").replace(/\s\s*$/,"")},parse:function(b,c){b=this.trim(b);"["==b.charAt(0)&&"]"==b.charAt(b.length-1)&&(b=b.substring(1,b.length-1));var e=b.indexOf(":");if(0<=e){var d=b.substring(0,e);if(""==d)return(d=a.prefixes[""])?d+b.substring(e+1):null;if("_"==d)return"_:"+b.substring(e+1);if(r.NCNAME.test(d)&&(d=a.prefixes[d]))return d+b.substring(e+1)}return c?a.baseURI.resolve(b):b}};this.base=null;this.toString=function(a){var c=a&&a.shorten?{graph:this,shorten:!0,prefixesUsed:{}}:null;a&&a.blankNodePrefix&&
(c.filterBlankNode=function(c){return"_:"+a.blankNodePrefix+c.substring(2)});if(a&&a.numericalBlankNodePrefix){var e=/^[0-9]+$/;c.filterBlankNode=function(c){var d=c.substring(2);return e.test(d)?"_:"+a.numericalBlankNodePrefix+d:c}}s="";for(var d in this.subjects)s+=this.subjects[d].toString(c),s+="\n";d=a&&a.baseURI?"@base <"+baseURI+"> .\n":"";if(c&&c.shorten)for(var f in c.prefixesUsed)d+="@prefix "+f+": <"+this.prefixes[f]+"> .\n";return 0==d.length?s:d+"\n"+s};this.blankNodeCounter=0;this.clear=
function(){this.subjects={};this.prefixes={};this.terms={};this.blankNodeCounter=0};this.clear();this.prefixes[""]="http://www.w3.org/1999/xhtml/vocab#";this.prefixes.grddl="http://www.w3.org/2003/g/data-view#";this.prefixes.ma="http://www.w3.org/ns/ma-ont#";this.prefixes.owl="http://www.w3.org/2002/07/owl#";this.prefixes.rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#";this.prefixes.rdfa="http://www.w3.org/ns/rdfa#";this.prefixes.rdfs="http://www.w3.org/2000/01/rdf-schema#";this.prefixes.rif="http://www.w3.org/2007/rif#";
this.prefixes.skos="http://www.w3.org/2004/02/skos/core#";this.prefixes.skosxl="http://www.w3.org/2008/05/skos-xl#";this.prefixes.wdr="http://www.w3.org/2007/05/powder#";this.prefixes["void"]="http://rdfs.org/ns/void#";this.prefixes.wdrs="http://www.w3.org/2007/05/powder-s#";this.prefixes.xhv="http://www.w3.org/1999/xhtml/vocab#";this.prefixes.xml="http://www.w3.org/XML/1998/namespace";this.prefixes.xsd="http://www.w3.org/2001/XMLSchema#";this.prefixes.sd="http://www.w3.org/ns/sparql-service-description#";
this.prefixes.org="http://www.w3.org/ns/org#";this.prefixes.gldp="http://www.w3.org/ns/people#";this.prefixes.cnt="http://www.w3.org/2008/content#";this.prefixes.dcat="http://www.w3.org/ns/dcat#";this.prefixes.earl="http://www.w3.org/ns/earl#";this.prefixes.ht="http://www.w3.org/2006/http#";this.prefixes.ptr="http://www.w3.org/2009/pointers#";this.prefixes.cc="http://creativecommons.org/ns#";this.prefixes.ctag="http://commontag.org/ns#";this.prefixes.dc="http://purl.org/dc/terms/";this.prefixes.dcterms=
"http://purl.org/dc/terms/";this.prefixes.foaf="http://xmlns.com/foaf/0.1/";this.prefixes.gr="http://purl.org/goodrelations/v1#";this.prefixes.ical="http://www.w3.org/2002/12/cal/icaltzd#";this.prefixes.og="http://ogp.me/ns#";this.prefixes.rev="http://purl.org/stuff/rev#";this.prefixes.sioc="http://rdfs.org/sioc/ns#";this.prefixes.v="http://rdf.data-vocabulary.org/#";this.prefixes.vcard="http://www.w3.org/2006/vcard/ns#";this.prefixes.schema="http://schema.org/";this.terms.describedby="http://www.w3.org/2007/05/powder-s#describedby";
this.terms.license="http://www.w3.org/1999/xhtml/vocab#license";this.terms.role="http://www.w3.org/1999/xhtml/vocab#role";Object.defineProperty(this,"tripleCount",{enumerable:!0,configurable:!1,get:function(){var a=0,c;for(c in this.subjects){var e=this.subjects[c],d;for(d in e.predicates)a+=e.predicates[d].objects.length}return a}})}function C(a,b){this.graph=a;this.id=this.subject=b;this.predicates={};this.origins=[];this.types=[]}function D(a){this.predicate=this.id=a;this.objects=[]}function v(a){m.call(this,
a)}function S(a){this.query=function(b,c){if(!b)return a.getProjections(c);var e=[],d;for(d in a._data_.graph.subjects){var f=a._data_.graph.subjects[d],l;for(l in b){var k=a._data_.graph.curieParser.parse(l,!0),k=f.predicates[k];if(!k){f=null;break}for(var h=a._data_.graph.curieParser.parse(b[l],!1),g=null,m=0;!g&&m<k.objects.length;m++)k.objects[m].value==h&&(g=k.objects[m]);if(!g){f=null;break}}f&&e.push(r.toProjection(a,f,c))}return e}}function P(a,b){this._data_={owner:a,subject:b,properties:{}}}
function r(a){this._data_={graph:new E};this._data_.graph.baseURI=this.parseURI(a);this._data_.baseURI=this._data_.graph.baseURI;Object.defineProperty(this,"rdfa",{value:new S(this),writable:!1,configurable:!1,enumerable:!0});Object.defineProperty(this,"graph",{value:this._data_.graph,writable:!1,configurable:!1,enumerable:!0});Object.defineProperty(this,"implementation",{value:GreenTurtle.implementation,writable:!1,configurable:!1,enumerable:!0})}function g(){this.reset();this.onError=function(a,
b){console.log(a+": "+b)}}function n(){this.blankCounter=0;this.vocabularies=[{namespaceURI:"http://schema.org/",isMember:function(a){return 0==a.indexOf(this.namespaceURI)},getProperty:function(a){return this.namespaceURI+a}}]}function O(a){n.call(this);this.graph=a}var R={version:"1.3.0"};A.SCHEME=/^[A-Za-z][A-Za-z0-9\+\-\.]*\:/;A.prototype.parseURI=function(a){var b=A.SCHEME.exec(a);if(!b)throw"Bad URI value, no scheme: "+a;a={spec:a};a.scheme=b[0].substring(0,b[0].length-1);a.schemeSpecificPart=
a.spec.substring(b[0].length);"/"==a.schemeSpecificPart.charAt(0)&&"/"==a.schemeSpecificPart.charAt(1)?this.parseGeneric(a):a.isGeneric=!1;a.normalize=function(){if(this.isGeneric&&0!=this.segments.length){if(1<this.path.length&&"/."==this.path.substring(this.path.length-2))this.path=this.path.substring(0,this.path.length-1),this.segments.splice(this.segments.length-1,1);else{var a=this.path.charAt(this.path.length-1);"/"!=a&&(a="");for(var b=0;b<this.segments.length;b++)0<b&&".."==this.segments[b]&&
(this.segments.splice(b-1,2),b-=2),"."==this.segments[b]&&(this.segments.splice(b,1),b--);this.path=0==this.segments.length?"/":"/"+this.segments.join("/")+a}this.schemeSpecificPart="//"+this.authority+this.path;"undefined"!=typeof this.query&&(this.schemeSpecificPart+="?"+this.query);"undefined"!=typeof this.fragment&&(this.schemeSpecificPart+="#"+this.fragment);this.spec=this.scheme+":"+this.schemeSpecificPart}};a.resolve=function(a){if(!a)return this.spec;if("#"==a.charAt(0)){var b=this.spec.lastIndexOf("#");
return 0>b?this.spec+a:this.spec.substring(0,b)+a}if(!this.isGeneric)throw"Cannot resolve uri against non-generic URI: "+this.spec;a.indexOf(":");if("/"==a.charAt(0))return this.scheme+"://"+this.authority+a;if("."==a.charAt(0)&&"/"==a.charAt(1)){if("/"==this.path.charAt(this.path.length-1))return this.scheme+"://"+this.authority+this.path+a.substring(2);b=this.path.lastIndexOf("/");return this.scheme+"://"+this.authority+this.path.substring(0,b)+a.substring(1)}if(A.SCHEME.test(a))return a;if("?"==
a.charAt(0)||"/"==this.path.charAt(this.path.length-1))return this.scheme+"://"+this.authority+this.path+a;b=this.path.lastIndexOf("/");return this.scheme+"://"+this.authority+this.path.substring(0,b+1)+a};a.relativeTo=function(a){if(a.scheme!=this.scheme)return this.spec;if(!this.isGeneric)throw"A non generic URI cannot be made relative: "+this.spec;if(!a.isGeneric)throw"Cannot make a relative URI against a non-generic URI: "+a.spec;if(a.authority!=this.authority)return this.spec;for(var b=0;b<this.segments.length&&
b<a.segments.length;b++)if(this.segments[b]!=a.segments[b]){for(var d="",f=b;f<a.segments.length;f++)d+="../";for(f=b;f<this.segments.length;f++)d+=this.segments[f],f+1<this.segments.length&&(d+="/");"/"==this.path.charAt(this.path.length-1)&&(d+="/");return d}if(this.segments.length==a.segments.length)return this.hash?this.hash:this.query?this.query:"";if(b<this.segments.length){d="";for(f=b;f<this.segments.length;f++)d+=this.segments[f],f+1<this.segments.length&&(d+="/");"/"==this.path.charAt(this.path.length-
1)&&(d+="/");return d}throw"Cannot calculate a relative URI for "+this.spec+" against "+a.spec;};return a};A.prototype.parseGeneric=function(a){if("/"!=a.schemeSpecificPart.charAt(0)||"/"!=a.schemeSpecificPart.charAt(1))throw"Generic URI values should start with '//':"+a.spec;var b=a.schemeSpecificPart.substring(2),c=b.indexOf("/");a.authority=0>c?b:b.substring(0,c);a.path=0>c?"":b.substring(c);b=a.path.indexOf("#");0<=b&&(a.fragment=a.path.substring(b+1),a.path=a.path.substring(0,b));b=a.path.indexOf("?");
0<=b&&(a.query=a.path.substring(b+1),a.path=a.path.substring(0,b));if("/"==a.path||""==a.path)a.segments=[];else for(a.segments=a.path.split(/\//),0<a.segments.length&&""==a.segments[0]&&1<a.path.length&&"/"!=a.path.charAt(1)&&a.segments.shift(),0<a.segments.length&&0<a.path.length&&"/"==a.path.charAt(a.path.length-1)&&""==a.segments[a.segments.length-1]&&1<a.path.length&&"/"!=a.path.charAt(a.path.length-2)&&a.segments.pop(),b=0;b<a.segments.length;b++)for(var c=a.segments[b].split(/%[A-Za-z0-9][A-Za-z0-9]|[\ud800-\udfff][\ud800-\udfff]|[A-Za-z0-9\-\._~!$&'()*+,;=@:\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+/),
e=0;e<c.length;e++)if(0<c[e].length)throw"Unecaped character "+c[e].charAt(0)+" ("+c[e].charCodeAt(0)+") in URI "+a.spec;a.isGeneric=!0};m.prototype=new A;m.prototype.constructor=m;m.prototype.newBlankNode=function(){this.blankCounter++;return"_:"+this.blankCounter};m.XMLLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral";m.HTMLLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#HTML";m.PlainLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#PlainLiteral";m.objectURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#object";
m.typeURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#type";m.nameChar="[-A-Z_a-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd\u10000-\uefffF.0-9\u00b7\u0300-\u036f\u203f-\u2040]";m.nameStartChar="[A-Za-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u00ff\u0100-\u0131\u0134-\u013e\u0141-\u0148\u014a-\u017e\u0180-\u01c3\u01cd-\u01f0\u01f4-\u01f5\u01fa-\u0217\u0250-\u02a8\u02bb-\u02c1\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03ce\u03d0-\u03d6\u03da\u03dc\u03de\u03e0\u03e2-\u03f3\u0401-\u040c\u040e-\u044f\u0451-\u045c\u045e-\u0481\u0490-\u04c4\u04c7-\u04c8\u04cb-\u04cc\u04d0-\u04eb\u04ee-\u04f5\u04f8-\u04f9\u0531-\u0556\u0559\u0561-\u0586\u05d0-\u05ea\u05f0-\u05f2\u0621-\u063a\u0641-\u064a\u0671-\u06b7\u06ba-\u06be\u06c0-\u06ce\u06d0-\u06d3\u06d5\u06e5-\u06e6\u0905-\u0939\u093d\u0958-\u0961\u0985-\u098c\u098f-\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09dc-\u09dd\u09df-\u09e1\u09f0-\u09f1\u0a05-\u0a0a\u0a0f-\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32-\u0a33\u0a35-\u0a36\u0a38-\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8b\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2-\u0ab3\u0ab5-\u0ab9\u0abd\u0ae0\u0b05-\u0b0c\u0b0f-\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32-\u0b33\u0b36-\u0b39\u0b3d\u0b5c-\u0b5d\u0b5f-\u0b61\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99-\u0b9a\u0b9c\u0b9e-\u0b9f\u0ba3-\u0ba4\u0ba8-\u0baa\u0bae-\u0bb5\u0bb7-\u0bb9\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c60-\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cde\u0ce0-\u0ce1\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d28\u0d2a-\u0d39\u0d60-\u0d61\u0e01-\u0e2e\u0e30\u0e32-\u0e33\u0e40-\u0e45\u0e81-\u0e82\u0e84\u0e87-\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa-\u0eab\u0ead-\u0eae\u0eb0\u0eb2-\u0eb3\u0ebd\u0ec0-\u0ec4\u0f40-\u0f47\u0f49-\u0f69\u10a0-\u10c5\u10d0-\u10f6\u1100\u1102-\u1103\u1105-\u1107\u1109\u110b-\u110c\u110e-\u1112\u113c\u113e\u1140\u114c\u114e\u1150\u1154-\u1155\u1159\u115f-\u1161\u1163\u1165\u1167\u1169\u116d-\u116e\u1172-\u1173\u1175\u119e\u11a8\u11ab\u11ae-\u11af\u11b7-\u11b8\u11ba\u11bc-\u11c2\u11eb\u11f0\u11f9\u1e00-\u1e9b\u1ea0-\u1ef9\u1f00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2126\u212a-\u212b\u212e\u2180-\u2182\u3041-\u3094\u30a1-\u30fa\u3105-\u312c\uac00-\ud7a3\u4e00-\u9fa5\u3007\u3021-\u3029_]";
m.NCNAME=new RegExp("^"+m.nameStartChar+m.nameChar+"*$");m.trim=function(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")};m.prototype.tokenize=function(a){return m.trim(a).split(/\s+/)};m.prototype.parseSafeCURIEOrCURIEOrURI=function(a,b,c){a=m.trim(a);return"["==a.charAt(0)&&"]"==a.charAt(a.length-1)?(a=a.substring(1,a.length-1),a=a.trim(a),0==a.length?null:"_:"==a?this.theOne:this.parseCURIE(a,b,c)):this.parseCURIEOrURI(a,b,c)};m.prototype.parseCURIE=function(a,b,c){c=a.indexOf(":");if(0<=
c){var e=a.substring(0,c);if(""==e)return(b=b[""])?b+a.substring(c+1):null;if("_"==e)return"_:"+a.substring(c+1);if(m.NCNAME.test(e)&&(b=b[e]))return b+a.substring(c+1)}return null};m.prototype.parseCURIEOrURI=function(a,b,c){return(b=this.parseCURIE(a,b,c))?b:this.resolveAndNormalize(c,a)};m.prototype.parsePredicate=function(a,b,c,e,d,f){return""==a?null:(a=this.parseTermOrCURIEOrAbsURI(a,b,f?null:c,e,d))&&0==a.indexOf("_:")?null:a};m.prototype.parseTermOrCURIEOrURI=function(a,b,c,e,d){a=m.trim(a);
if((e=this.parseCURIE(a,e,d))||(e=c[a]))return e;e=a.toLowerCase();return(e=c[e])?e:b&&!this.absURIRE.exec(a)?b+a:this.resolveAndNormalize(d,a)};m.prototype.parseTermOrCURIEOrAbsURI=function(a,b,c,e,d){a=m.trim(a);if(e=this.parseCURIE(a,e,d))return e;if(c){if(b&&!this.absURIRE.exec(a))return b+a;if(b=c[a])return b;b=a.toLowerCase();if(b=c[b])return b}return this.absURIRE.exec(a)?this.resolveAndNormalize(d,a):null};m.prototype.resolveAndNormalize=function(a,b){var c=a.resolve(b),c=this.parseURI(c);
c.normalize();return c.spec};m.prototype.parsePrefixMappings=function(a,b){for(var c=this.tokenize(a),e=null,d=0;d<c.length;d++)":"==c[d][c[d].length-1]?e=c[d].substring(0,c[d].length-1):e&&(b[e]=this.target.baseURI?this.target.baseURI.resolve(c[d]):c[d],e=null)};m.prototype.copyMappings=function(a){var b={},c;for(c in a)b[c]=a[c];return b};m.prototype.ancestorPath=function(a){for(var b="";a&&a.nodeType!=Node.DOCUMENT_NODE;)b="/"+a.localName+b,a=a.parentNode;return b};m.prototype.setContext=function(a){"html"==
a.localName&&"XHTML+RDFa 1.1"==a.getAttribute("version")?this.setXHTMLContext():"html"==a.localName||"http://www.w3.org/1999/xhtml"==a.namespaceURI?document.doctype?"-//W3C//DTD XHTML+RDFa 1.0//EN"==document.doctype.publicId&&"http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd"==document.doctype.systemId?(console.log("WARNING: RDF 1.0 is not supported.  Defaulting to HTML5 mode."),this.setHTMLContext()):"-//W3C//DTD XHTML+RDFa 1.1//EN"==document.doctype.publicId&&"http://www.w3.org/MarkUp/DTD/xhtml-rdfa-2.dtd"==
document.doctype.systemId?this.setXHTMLContext():this.setHTMLContext():this.setHTMLContext():this.setXMLContext()};m.prototype.setInitialContext=function(){this.vocabulary=null;this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"}]};m.prototype.setXMLContext=function(){this.setInitialContext();this.inHTMLMode=this.inXHTMLMode=!1};m.prototype.setHTMLContext=function(){this.setInitialContext();this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",
localName:"lang"},{namespaceURI:null,localName:"lang"}];this.inXHTMLMode=!1;this.inHTMLMode=!0};m.prototype.setXHTMLContext=function(){this.setInitialContext();this.inXHTMLMode=!0;this.inHTMLMode=!1;this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"},{namespaceURI:null,localName:"lang"}];this.target.graph.terms.alternate="http://www.w3.org/1999/xhtml/vocab#alternate";this.target.graph.terms.appendix="http://www.w3.org/1999/xhtml/vocab#appendix";this.target.graph.terms.bookmark=
"http://www.w3.org/1999/xhtml/vocab#bookmark";this.target.graph.terms.cite="http://www.w3.org/1999/xhtml/vocab#cite";this.target.graph.terms.chapter="http://www.w3.org/1999/xhtml/vocab#chapter";this.target.graph.terms.contents="http://www.w3.org/1999/xhtml/vocab#contents";this.target.graph.terms.copyright="http://www.w3.org/1999/xhtml/vocab#copyright";this.target.graph.terms.first="http://www.w3.org/1999/xhtml/vocab#first";this.target.graph.terms.glossary="http://www.w3.org/1999/xhtml/vocab#glossary";
this.target.graph.terms.help="http://www.w3.org/1999/xhtml/vocab#help";this.target.graph.terms.icon="http://www.w3.org/1999/xhtml/vocab#icon";this.target.graph.terms.index="http://www.w3.org/1999/xhtml/vocab#index";this.target.graph.terms.last="http://www.w3.org/1999/xhtml/vocab#last";this.target.graph.terms.license="http://www.w3.org/1999/xhtml/vocab#license";this.target.graph.terms.meta="http://www.w3.org/1999/xhtml/vocab#meta";this.target.graph.terms.next="http://www.w3.org/1999/xhtml/vocab#next";
this.target.graph.terms.prev="http://www.w3.org/1999/xhtml/vocab#prev";this.target.graph.terms.previous="http://www.w3.org/1999/xhtml/vocab#previous";this.target.graph.terms.section="http://www.w3.org/1999/xhtml/vocab#section";this.target.graph.terms.stylesheet="http://www.w3.org/1999/xhtml/vocab#stylesheet";this.target.graph.terms.subsection="http://www.w3.org/1999/xhtml/vocab#subsection";this.target.graph.terms.start="http://www.w3.org/1999/xhtml/vocab#start";this.target.graph.terms.top="http://www.w3.org/1999/xhtml/vocab#top";
this.target.graph.terms.up="http://www.w3.org/1999/xhtml/vocab#up";this.target.graph.terms.p3pv1="http://www.w3.org/1999/xhtml/vocab#p3pv1";this.target.graph.terms.related="http://www.w3.org/1999/xhtml/vocab#related";this.target.graph.terms.role="http://www.w3.org/1999/xhtml/vocab#role";this.target.graph.terms.transformation="http://www.w3.org/1999/xhtml/vocab#transformation"};m.prototype.init=function(){};m.prototype.newSubjectOrigin=function(a,b){};m.prototype.addTriple=function(a,b,c,e){};m.dateTimeTypes=
[{pattern:/-?P(?:[0-9]+Y)?(?:[0-9]+M)?(?:[0-9]+D)?(?:T(?:[0-9]+H)?(?:[0-9]+M)?(?:[0-9]+(?:\.[0-9]+)?S)?)?/,type:"http://www.w3.org/2001/XMLSchema#duration"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]-[0-9][0-9]T(?:[0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9](?:\.[0-9]+)?(?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#dateTime"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]-[0-9][0-9](?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,
type:"http://www.w3.org/2001/XMLSchema#date"},{pattern:/(?:[0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9](?:\.[0-9]+)?(?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#time"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]/,type:"http://www.w3.org/2001/XMLSchema#gYearMonth"},{pattern:/-?[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9]/,type:"http://www.w3.org/2001/XMLSchema#gYear"}];m.deriveDateTimeType=function(a){for(var b=0;b<
m.dateTimeTypes.length;b++){var c=m.dateTimeTypes[b].pattern.exec(a);if(c&&c[0].length==a.length)return m.dateTimeTypes[b].type}return null};m.prototype.process=function(a,b){a.nodeType==Node.DOCUMENT_NODE?(a=a.documentElement,this.setContext(a)):a.parentNode.nodeType==Node.DOCUMENT_NODE&&this.setContext(a);var c=[],e=function(a){var c=a.indexOf("#");0<=c&&(a=a.substring(0,c));b&&b.baseURIMap&&(a=b.baseURIMap(a));return a};for(c.push({current:a,context:this.push(null,e(a.baseURI))});0<c.length;){var d=
c.shift();if(d.parent){if(!d.context.parent||d.context.parent.listMapping!=d.listMapping)for(var f in d.listMapping){var l=d.listMapping[f];if(0==l.length)this.addTriple(d.parent,d.subject,f,{type:m.objectURI,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"});else{for(var k=[],h=0;h<l.length;h++)k.push(this.newBlankNode());for(h=0;h<k.length;h++)this.addTriple(d.parent,k[h],"http://www.w3.org/1999/02/22-rdf-syntax-ns#first",l[h]),this.addTriple(d.parent,k[h],"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest",
{type:m.objectURI,value:h+1<k.length?k[h+1]:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"});this.addTriple(d.parent,d.subject,f,{type:m.objectURI,value:k[0]})}}}else{var k=d.current,d=d.context,g=!1,p=null,n=null,q=null,x=d.prefixes,l=!1,r=[],w=d.listMapping,v=d.parent?!1:!0,Q=d.language,L=d.vocabulary,y=this.parseURI(e(k.baseURI));k.item=null;if(h=k.getAttributeNode("vocab"))h=m.trim(h.value),0<h.length?(L=h,this.addTriple(k,y.spec,"http://www.w3.org/ns/rdfa#usesVocabulary",{type:m.objectURI,
value:L})):L=this.vocabulary;for(h=0;h<k.attributes.length;h++){var B=k.attributes[h];if("x"==B.nodeName.charAt(0)&&0==B.nodeName.indexOf("xmlns:")){l||(x=this.copyMappings(x),l=!0);var F=B.nodeName.substring(6),B=m.trim(B.value);x[F]=this.target.baseURI?this.target.baseURI.resolve(B):B}}if(h=k.getAttributeNode("prefix"))l||(x=this.copyMappings(x),l=!0),this.parsePrefixMappings(h.value,x);l=null;for(h=0;!l&&h<this.langAttributes.length;h++)l=k.getAttributeNodeNS(this.langAttributes[h].namespaceURI,
this.langAttributes[h].localName);l&&(h=m.trim(l.value),Q=0<h.length?h:null);var F=k.getAttributeNode("rel"),B=k.getAttributeNode("rev"),G=k.getAttributeNode("typeof"),A=k.getAttributeNode("property"),D=k.getAttributeNode("datatype"),E=this.inHTMLMode?k.getAttributeNode("datetime"):null,C=k.getAttributeNode("content"),H=k.getAttributeNode("about"),M=k.getAttributeNode("src"),K=k.getAttributeNode("resource"),N=k.getAttributeNode("href"),J=k.getAttributeNode("inlist"),t=[];if(F)for(var I=this.tokenize(F.value),
h=0;h<I.length;h++)(f=this.parsePredicate(I[h],L,d.terms,x,y,this.inHTMLMode&&null!=A))&&t.push(f);var z=[];if(B)for(I=this.tokenize(B.value),h=0;h<I.length;h++)(f=this.parsePredicate(I[h],L,d.terms,x,y,this.inHTMLMode&&null!=A))&&z.push(f);!this.inHTMLMode||null==F&&null==B||null==A||(0==t.length&&(F=null),0==z.length&&(B=null));F||B?(H&&(p=this.parseSafeCURIEOrCURIEOrURI(H.value,x,y)),G&&(q=p),p||(k.parentNode.nodeType==Node.DOCUMENT_NODE?p=e(k.baseURI):d.parentObject&&(p=e(k.parentNode.baseURI)==
d.parentObject?e(k.baseURI):d.parentObject)),K&&(n=this.parseSafeCURIEOrCURIEOrURI(K.value,x,y)),n||(N?n=this.resolveAndNormalize(y,encodeURI(N.value)):M?n=this.resolveAndNormalize(y,encodeURI(M.value)):!G||H||this.inXHTMLMode&&("head"==k.localName||"body"==k.localName)||(n=this.newBlankNode())),!G||H||!this.inXHTMLMode||"head"!=k.localName&&"body"!=k.localName?G&&!H&&(q=n):q=p):!A||C||D?(H&&(p=this.parseSafeCURIEOrCURIEOrURI(H.value,x,y)),!p&&K&&(p=this.parseSafeCURIEOrCURIEOrURI(K.value,x,y)),!p&&
N&&(p=this.resolveAndNormalize(y,encodeURI(N.value))),!p&&M&&(p=this.resolveAndNormalize(y,encodeURI(M.value))),p||(k.parentNode.nodeType==Node.DOCUMENT_NODE?p=e(k.baseURI):!this.inXHTMLMode&&!this.inHTMLMode||"head"!=k.localName&&"body"!=k.localName?G?p=this.newBlankNode():d.parentObject&&(p=e(k.parentNode.baseURI)==d.parentObject?e(k.baseURI):d.parentObject,A||(g=!0)):p=e(k.parentNode.baseURI)==d.parentObject?e(k.baseURI):d.parentObject),G&&(q=p)):(H&&(p=this.parseSafeCURIEOrCURIEOrURI(H.value,
x,y),G&&(q=p)),p||k.parentNode.nodeType!=Node.DOCUMENT_NODE?!p&&d.parentObject&&(p=e(k.parentNode.baseURI)==d.parentObject?e(k.baseURI):d.parentObject):(p=e(k.baseURI),G&&(q=p)),G&&!q&&(K&&(q=this.parseSafeCURIEOrCURIEOrURI(K.value,x,y)),!q&&N&&(q=this.resolveAndNormalize(y,encodeURI(N.value))),!q&&M&&(q=this.resolveAndNormalize(y,encodeURI(M.value))),q||!this.inXHTMLMode&&!this.inHTMLMode||"head"!=k.localName&&"body"!=k.localName||(q=p),q||(q=this.newBlankNode()),n=q));p&&(H||K||q)&&(h=p,G&&!H&&
!K&&n&&(h=n),this.newSubjectOrigin(k,h));if(q)for(I=this.tokenize(G.value),h=0;h<I.length;h++)(l=this.parseTermOrCURIEOrAbsURI(I[h],L,d.terms,x,y))&&this.addTriple(k,q,m.typeURI,{type:m.objectURI,value:l});p&&p!=d.parentObject&&(w={},v=!0);if(n){if(F&&J)for(h=0;h<t.length;h++)l=w[t[h]],l||(l=[],w[t[h]]=l),l.push({type:m.objectURI,value:n});else if(F)for(h=0;h<t.length;h++)this.addTriple(k,p,t[h],{type:m.objectURI,value:n});if(B)for(h=0;h<z.length;h++)this.addTriple(k,n,z[h],{type:m.objectURI,value:p})}else{p&&
!n&&(F||B)&&(n=this.newBlankNode());if(F&&J)for(h=0;h<t.length;h++)l=w[t[h]],l||(l=[],w[f]=l),r.push({predicate:t[h],list:l});else if(F)for(h=0;h<t.length;h++)r.push({predicate:t[h],forward:!0});if(B)for(h=0;h<z.length;h++)r.push({predicate:z[h],forward:!1})}if(A)for(z=t=null,D?(t=""==D.value?m.PlainLiteralURI:this.parseTermOrCURIEOrAbsURI(D.value,L,d.terms,x,y),z=E&&!C?E.value:t==m.XMLLiteralURI||t==m.HTMLLiteralURI?null:C?C.value:k.textContent):C?(t=m.PlainLiteralURI,z=C.value):E?(z=E.value,t=m.deriveDateTimeType(z),
t||(t=m.PlainLiteralURI)):F||B||(K&&(z=this.parseSafeCURIEOrCURIEOrURI(K.value,x,y)),!z&&N?z=this.resolveAndNormalize(y,encodeURI(N.value)):!z&&M&&(z=this.resolveAndNormalize(y,encodeURI(M.value))),z&&(t=m.objectURI)),t||(G&&!H?(t=m.objectURI,z=q):(z=k.textContent,this.inHTMLMode&&"time"==k.localName&&(t=m.deriveDateTimeType(z)),t||(t=m.PlainLiteralURI))),I=this.tokenize(A.value),h=0;h<I.length;h++)if(f=this.parsePredicate(I[h],L,d.terms,x,y))J?(l=w[f],l||(l=[],w[f]=l),l.push(t==m.XMLLiteralURI||
t==m.HTMLLiteralURI?{type:t,value:k.childNodes}:{type:t?t:m.PlainLiteralURI,value:z,language:Q})):t==m.XMLLiteralURI||t==m.HTMLLiteralURI?this.addTriple(k,p,f,{type:t,value:k.childNodes}):this.addTriple(k,p,f,{type:t?t:m.PlainLiteralURI,value:z,language:Q});if(p&&!g)for(h=0;h<d.incomplete.length;h++)d.incomplete[h].list?d.incomplete[h].list.push({type:m.objectURI,value:p}):d.incomplete[h].forward?this.addTriple(k,d.subject,d.incomplete[h].predicate,{type:m.objectURI,value:p}):this.addTriple(k,p,d.incomplete[h].predicate,
{type:m.objectURI,value:d.subject});q=null;y=p;g?(q=this.push(d,d.subject),q.parentObject=e(k.parentNode.baseURI)==d.parentObject?e(k.baseURI):d.parentObject,q.incomplete=d.incomplete,q.language=Q,q.prefixes=x):(q=this.push(d,p),q.parentObject=n?n:p?p:d.subject,q.prefixes=x,q.incomplete=r,n&&(y=n,w={},v=!0),q.listMapping=w,q.language=Q);q.vocabulary=L;v&&c.unshift({parent:k,context:d,subject:y,listMapping:w});for(k=k.lastChild;k;k=k.previousSibling)k.nodeType==Node.ELEMENT_NODE&&c.unshift({current:k,
context:q})}}this.inHTMLMode&&this.copyProperties();for(h=0;h<this.finishedHandlers.length;h++)this.finishedHandlers[h](a)};m.prototype.copyProperties=function(){};m.prototype.push=function(a,b){return{parent:a,subject:b?b:a?a.subject:null,parentObject:null,incomplete:[],listMapping:a?a.listMapping:{},language:a?a.language:this.language,prefixes:a?a.prefixes:this.target.graph.prefixes,terms:a?a.terms:this.target.graph.terms,vocabulary:a?a.vocabulary:this.vocabulary}};E.prototype.newBlankNode=function(){this.blankNodeCounter++;
return"_:"+this.blankNodeCounter};E.prototype.expand=function(a){return this.curieParser.parse(a,!0)};E.prototype.shorten=function(a,b){for(prefix in this.prefixes){var c=this.prefixes[prefix];if(0==a.indexOf(c))return b&&(b[prefix]=c),prefix+":"+a.substring(c.length)}return null};E.prototype.add=function(a,b,c,e){if(a&&b&&c){a=this.expand(a);b=this.expand(b);var d=this.subjects[a];d||(d=new C(this,a),this.subjects[a]=d);e&&e.origin&&d.origins.push(e.origin);"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"==
b&&d.types.push(c);a=d.predicates[b];a||(a=new D(b),d.predicates[b]=a);"string"==typeof c?a.objects.push({type:m.PlainLiteralURI,value:c}):a.objects.push({type:c.type?this.expand(c.type):m.PlainLiteralURI,value:c.value?c.value:"",origin:c.origin,language:c.language})}};E.prototype.addCollection=function(a,b,c,e){if(a&&b&&c){for(var d=0;d<c.length;d++){var f={type:e&&e.type?e.type:"rdf:PlainLiteral"};e&&e.language&&(f.language=e.language);e&&e.datatype&&(f.datatype=e.datatype);"object"==typeof c[d]?
(f.value=c[d].value?c[d].value:"",c[d].type&&(f.type=c[d].type),c[d].language&&(f.language=c[d].language),c[d].datatype&&(f.datatype=c[d].datatype)):f.value=c[d];var l=this.newBlankNode();this.add(a,b,{type:"rdf:object",value:l});this.add(l,"rdf:first",f);a=l;b="http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"}this.add(a,b,{type:"rdf:object",value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"})}};E.prototype.remove=function(a,b){if(a){a=this.expand(a);var c=this.subjects[c];c&&(b?(b=this.expand(b),
delete c.predicates[b]):delete this.subjects[a])}else this.subjects={}};C.prototype.toString=function(a){var b=null;"_:"==this.subject.substring(0,2)?b=a&&a.filterBlankNode?a.filterBlankNode(this.subject):this.subject:a&&a.shorten?(b=this.graph.shorten(this.subject,a.prefixesUsed))||(b="<"+this.subject+">"):b="<"+this.subject+">";var c=!0,e;for(e in this.predicates)c?c=!1:b+=";\n",b+=" "+this.predicates[e].toString(a);return b+" ."};C.prototype.toObject=function(){var a={subject:this.subject,predicates:{}},
b;for(b in this.predicates){var c=this.predicates[b],e={predicate:b,objects:[]};a.predicates[b]=e;for(var d=0;d<c.objects.length;d++){var f=c.objects[d];if(f.type==m.XMLLiteralURI){for(var l=new XMLSerializer,k="",h=0;h<f.value.length;h++)f.value[h].nodeType==Node.ELEMENT_NODE?k+=l.serializeToString(f.value[h]):f.value[h].nodeType==Node.TEXT_NODE&&(k+=f.value[h].nodeValue);e.objects.push({type:f.type,value:k,language:f.language})}else f.type==m.HTMLLiteralURI?(k=0==f.value.length?"":f.value[0].parentNode.innerHTML,
e.objects.push({type:f.type,value:k,language:f.language})):e.objects.push({type:f.type,value:f.value,language:f.language})}}return a};C.prototype.getValues=function(){for(var a=[],b=0;b<arguments.length;b++){var c=this.graph.curieParser.parse(arguments[b],!0);if(c=this.predicates[c])for(var e=0;e<c.objects.length;e++)a.push(c.objects[e].value)}return a};D.getPrefixMap=function(a){for(var b={};a.attributes;){for(var c=0;c<a.attributes.length;c++)if("http://www.w3.org/2000/xmlns/"==a.attributes[c].namespaceURI){var e=
a.attributes[c].localName;"xmlns"==a.attributes[c].localName&&(e="");e in b||(b[e]=a.attributes[c].nodeValue)}a=a.parentNode}return b};D.prototype.toString=function(a){var b=null;a&&a.shorten&&a.graph?(b=a.graph.shorten(this.predicate,a.prefixesUsed))||(b="<"+this.predicate+">"):b="<"+this.predicate+">";for(var b=b+" ",c=0;c<this.objects.length;c++)if(0<c&&(b+=", "),"http://www.w3.org/1999/02/22-rdf-syntax-ns#object"==this.objects[c].type)"_:"==this.objects[c].value.substring(0,2)?b=a&&a.filterBlankNode?
b+a.filterBlankNode(this.objects[c].value):b+this.objects[c].value:a&&a.shorten&&a.graph?b=(u=a.graph.shorten(this.objects[c].value,a.prefixesUsed))?b+u:b+("<"+this.objects[c].value+">"):b+="<"+this.objects[c].value+">";else if("http://www.w3.org/2001/XMLSchema#integer"==this.objects[c].type||"http://www.w3.org/2001/XMLSchema#decimal"==this.objects[c].type||"http://www.w3.org/2001/XMLSchema#double"==this.objects[c].type||"http://www.w3.org/2001/XMLSchema#boolean"==this.objects[c].type)b+=this.objects[c].value;
else if("http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral"==this.objects[c].type){for(var e=new XMLSerializer,d="",f=0;f<this.objects[c].value.length;f++)if(this.objects[c].value[f].nodeType==Node.ELEMENT_NODE){var l=D.getPrefixMap(this.objects[c].value[f]),k=[],h;for(h in l)k.push(h);k.sort();for(var g=this.objects[c].value[f].cloneNode(!0),m=0;m<k.length;m++)g.setAttributeNS("http://www.w3.org/2000/xmlns/",0==k[m].length?"xmlns":"xmlns:"+k[m],l[k[m]]);d+=e.serializeToString(g)}else this.objects[c].value[f].nodeType==
Node.TEXT_NODE&&(d+=this.objects[c].value[f].nodeValue);b+='"""'+d.replace(/"""/g,'\\"\\"\\"')+'"""^^<http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral>'}else"http://www.w3.org/1999/02/22-rdf-syntax-ns#HTML"==this.objects[c].type?b=0==this.objects[c].value.length?b+'""""""^^<http://www.w3.org/1999/02/22-rdf-syntax-ns#HTML>':b+('"""'+this.objects[c].value[0].parentNode.innerHTML.replace(/"""/g,'\\"\\"\\"')+'"""^^<http://www.w3.org/1999/02/22-rdf-syntax-ns#HTML>'):(e=this.objects[c].value,b=0<=
e.indexOf("\n")||0<=e.indexOf("\r")?b+('"""'+e.replace(/"""/g,'\\"\\"\\"')+'"""'):b+('"'+e.replace(/"/g,'\\"')+'"'),"http://www.w3.org/1999/02/22-rdf-syntax-ns#PlainLiteral"!=this.objects[c].type?b+="^^<"+this.objects[c].type+">":this.objects[c].language&&(b+="@"+this.objects[c].language));return b};v.prototype=new m;v.prototype.constructor=m;v.prototype.getObjectSize=function(a){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b};v.prototype.init=function(){var a=this;this.finishedHandlers.push(function(b){for(var c in a.target.graph.subjects)0==
a.getObjectSize(a.target.graph.subjects[c].predicates)&&delete a.target.graph.subjects[c]})};v.prototype.newBlankNode=function(){return this.target.graph.newBlankNode()};v.prototype.newSubjectOrigin=function(a,b){for(var c=this.newSubject(null,b),e=0;e<c.origins.length;e++)if(c.origins[e]===a)return;c.origins.push(a);a.data||Object.defineProperty(a,"data",{value:c,writable:!1,configurable:!0,enumerable:!0})};v.prototype.newSubject=function(a,b){var c=this.target.graph.subjects[b];c||(c=new C(this.target.graph,
b),this.target.graph.subjects[b]=c);return c};v.prototype.addTriple=function(a,b,c,e){var d=this.newSubject(a,b);b=d.predicates[c];b||(b=new D(c),d.predicates[c]=b);for(var f=0;f<b.objects.length;f++)if(b.objects[f].type==e.type&&b.objects[f].value==e.value){b.objects[f].origin!==a&&(Array.isArray(b.objects[f].origin)||(c=[],c.push(b.objects[f].origin),b.objects[f].origin=c),b.objects[f].origin.push(a));return}b.objects.push(e);e.origin=a;c==m.typeURI&&d.types.push(e.value)};v.rdfaCopyPredicate="http://www.w3.org/ns/rdfa#copy";
v.rdfaPatternType="http://www.w3.org/ns/rdfa#Pattern";v.prototype.copyProperties=function(){var a=[],b={},c;for(c in this.target.graph.subjects){var e=this.target.graph.subjects[c],d=e.predicates[v.rdfaCopyPredicate];if(d){a.push(c);for(var f=0;f<d.objects.length;f++)if(d.objects[f].type==m.objectURI){var l=d.objects[f].value,k=this.target.graph.subjects[l];if(k){var h=k.predicates[m.typeURI];if(h){for(var g=!1,p=0;p<h.objects.length&&!g;p++)h.objects[p].value==v.rdfaPatternType&&h.objects[p].type==
m.objectURI&&(g=!0);if(g){b[l]=!0;for(var n in k.predicates)if(l=k.predicates[n],n==m.typeURI){if(1!=l.objects.length)for(p=0;p<l.objects.length;p++)l.objects[p].value!=v.rdfaPatternType&&(h=e.predicates[n],h||(h=new D(n),e.predicates[n]=h),h.objects.push({type:l.objects[p].type,value:l.objects[p].value,language:l.objects[p].language,origin:l.objects[p].origin}),e.types.push(l.objects[p].value))}else for(h=e.predicates[n],h||(h=new D(n),e.predicates[n]=h),p=0;p<l.objects.length;p++)h.objects.push({type:l.objects[p].type,
value:l.objects[p].value,language:l.objects[p].language,origin:l.objects[p].origin})}}}}}}for(f=0;f<a.length;f++)e=this.target.graph.subjects[a[f]],delete e.predicates[v.rdfaCopyPredicate];for(c in b)delete this.target.graph.subjects[c]};P.prototype.getProperties=function(){var a=[],b;for(b in this._data_.properties)a.push(b);return a};P.prototype.getSubject=function(){return this._data_.subject};P.prototype.get=function(a){a=this._data_.owner._data_.graph.curieParser.parse(a,!0);return(a=this._data_.properties[a])?
a[0]:null};P.prototype.getAll=function(a){a=this._data_.owner._data_.graph.curieParser.parse(a,!0);return this._data_.properties[a]};r.prototype=new A;r.prototype.constructor=r;r.nameChar="[-A-Z_a-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd\u10000-\uefffF.0-9\u00b7\u0300-\u036f\u203f-\u2040]";r.nameStartChar="[A-Za-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u00ff\u0100-\u0131\u0134-\u013e\u0141-\u0148\u014a-\u017e\u0180-\u01c3\u01cd-\u01f0\u01f4-\u01f5\u01fa-\u0217\u0250-\u02a8\u02bb-\u02c1\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03ce\u03d0-\u03d6\u03da\u03dc\u03de\u03e0\u03e2-\u03f3\u0401-\u040c\u040e-\u044f\u0451-\u045c\u045e-\u0481\u0490-\u04c4\u04c7-\u04c8\u04cb-\u04cc\u04d0-\u04eb\u04ee-\u04f5\u04f8-\u04f9\u0531-\u0556\u0559\u0561-\u0586\u05d0-\u05ea\u05f0-\u05f2\u0621-\u063a\u0641-\u064a\u0671-\u06b7\u06ba-\u06be\u06c0-\u06ce\u06d0-\u06d3\u06d5\u06e5-\u06e6\u0905-\u0939\u093d\u0958-\u0961\u0985-\u098c\u098f-\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09dc-\u09dd\u09df-\u09e1\u09f0-\u09f1\u0a05-\u0a0a\u0a0f-\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32-\u0a33\u0a35-\u0a36\u0a38-\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8b\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2-\u0ab3\u0ab5-\u0ab9\u0abd\u0ae0\u0b05-\u0b0c\u0b0f-\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32-\u0b33\u0b36-\u0b39\u0b3d\u0b5c-\u0b5d\u0b5f-\u0b61\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99-\u0b9a\u0b9c\u0b9e-\u0b9f\u0ba3-\u0ba4\u0ba8-\u0baa\u0bae-\u0bb5\u0bb7-\u0bb9\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c60-\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cde\u0ce0-\u0ce1\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d28\u0d2a-\u0d39\u0d60-\u0d61\u0e01-\u0e2e\u0e30\u0e32-\u0e33\u0e40-\u0e45\u0e81-\u0e82\u0e84\u0e87-\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa-\u0eab\u0ead-\u0eae\u0eb0\u0eb2-\u0eb3\u0ebd\u0ec0-\u0ec4\u0f40-\u0f47\u0f49-\u0f69\u10a0-\u10c5\u10d0-\u10f6\u1100\u1102-\u1103\u1105-\u1107\u1109\u110b-\u110c\u110e-\u1112\u113c\u113e\u1140\u114c\u114e\u1150\u1154-\u1155\u1159\u115f-\u1161\u1163\u1165\u1167\u1169\u116d-\u116e\u1172-\u1173\u1175\u119e\u11a8\u11ab\u11ae-\u11af\u11b7-\u11b8\u11ba\u11bc-\u11c2\u11eb\u11f0\u11f9\u1e00-\u1e9b\u1ea0-\u1ef9\u1f00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2126\u212a-\u212b\u212e\u2180-\u2182\u3041-\u3094\u30a1-\u30fa\u3105-\u312c\uac00-\ud7a3\u4e00-\u9fa5\u3007\u3021-\u3029_]";
r.NCNAME=new RegExp("^"+m.nameStartChar+m.nameChar+"*$");r.toProjection=function(a,b,c){var e=new P(a,b.subject),d;for(d in b.predicates){var f=b.predicates[d],l=[];e._data_.properties[d]=l;for(var k=0;k<f.objects.length;k++)l.push(f.objects[k].value)}if(c)for(var h in c)d=c[h],d=a._data_.graph.curieParser.parse(d,!0),(l=e._data_.properties[d])&&(e[h]=1==l.length?l[0]:l);return e};r.prototype.getProperties=function(a){var b=[];if(a){if(a=this._data_.graph.curieParser.parse(a,!0),d=this._data_.graph.subjects[a])for(var c in d.predicates)b.push(c)}else{a=
{};for(var e in this._data_.graph.subjects){var d=this._data_.graph.subjects[e];if(d)for(c in d.predicates)a[c]||(a[c]=!0,b.push(c))}}return b};r.prototype.getSubjects=function(a,b){var c=[];a&&(a=this._data_.graph.curieParser.parse(a,!0));if(a&&b){var e=this._data_.graph.curieParser.parse(b,!0),d;for(d in this._data_.graph.subjects){var f=this._data_.graph.subjects[d];if(f=f.predicates[a])for(var l=0;l<f.objects.length;l++)if(f.objects[l].value==b||f.objects[l].value==e){c.push(d);break}}}else if(a)for(d in this._data_.graph.subjects)f=
this._data_.graph.subjects[d],(f=f.predicates[a])&&c.push(d);else if(b)for(d in e=this._data_.graph.curieParser.parse(b,!0),this._data_.graph.subjects){var f=this._data_.graph.subjects[d],k;for(k in f.predicates)if(f=d.predicates[k]){for(var h=null,l=0;!h&&l<f.objects.length;l++)if(f.objects[l].value==b||node.objects[l].value==e)h=f.objects[l];if(h){c.push(d);break}}}else for(d in this._data_.graph.subjects)c.push(d);return c};r.prototype.getValueOrigins=function(a,b){var c=[],e=function(a){if(a)for(var b=
0;b<a.objects.length;b++)if(Array.isArray(a.objects[b].origin))for(var e=0;e<a.objects[b].origin.length;e++)c.push({origin:a.objects[b].origin[e],value:a.objects[b].value});else c.push({origin:a.objects[b].origin,value:a.objects[b].value})};b&&(b=this._data_.graph.curieParser.parse(b,!0));if(a){a=this._data_.graph.curieParser.parse(a,!0);var d=this._data_.graph.subjects[a];if(d)if(b)e(d.predicates[b]);else for(var f in d.predicates)e(d.predicates[f])}else if(b)for(var l in this._data_.graph.subjects)d=
this._data_.graph.subjects[l],e(d.predicates[b]);else for(l in this._data_.graph.subjects)for(f in d=this._data_.graph.subjects[l],d.predicates)e(d.predicates[f]);return c};r.prototype.getValues=function(a,b){var c=[];b&&(b=this._data_.graph.curieParser.parse(b,!0));if(a){a=this._data_.graph.curieParser.parse(a,!0);var e=this._data_.graph.subjects[a];if(e)if(b){var d=e.predicates[b];if(d)for(var f=0;f<d.objects.length;f++)c.push(d.objects[f].value)}else for(var l in e.predicates)for(d=e.predicates[l],
f=0;f<d.objects.length;f++)c.push(d.objects[f].value)}else if(b)for(var g in this._data_.graph.subjects){if(e=this._data_.graph.subjects[g],d=e.predicates[b])for(f=0;f<d.objects.length;f++)c.push(d.objects[f].value)}else for(g in this._data_.graph.subjects)for(l in e=this._data_.graph.subjects[g],e.predicates)for(d=e.predicates[l],f=0;f<d.objects.length;f++)c.push(d.objects[f].value);return c};Object.defineProperty(r.prototype,"prefixes",{enumerable:!0,get:function(){return Object.keys(this._data_.graph.prefixes)}});
r.prototype.setMapping=function(a,b){this._data_.graph.prefixes[a]=b};r.prototype.getMapping=function(a){return this._data_.graph.prefixes[a]};r.prototype.expand=function(a){return this._data_.graph.expand(a)};r.prototype.shorten=function(a){return this._data_.graph.shorten(a)};r.prototype.getSubject=function(a){if(!a)return null;a=this._data_.graph.curieParser.parse(a,!0);return(a=this._data_.graph.subjects[a])?a:null};r.prototype.getProjection=function(a,b){if(!a)return null;a=this._data_.graph.curieParser.parse(a,
!0);var c=this._data_.graph.subjects[a];return c?r.toProjection(this,c,b):null};r.prototype.getProjections=function(a,b,c){a&&(a=this._data_.graph.curieParser.parse(a,!0));var e=[];"undefined"==typeof b&&"undefined"==typeof c&&(c=a);if(a&&b){var d=this._data_.graph.curieParser.parse(b,!0),f;for(f in this._data_.graph.subjects){var l=this._data_.graph.subjects[f],g=l.predicates[a];if(g)for(var h=0;h<g.objects.length;h++)if(g.objects[h].value==b||g.objects[h].value==d){e.push(r.toProjection(this,l,
c));break}}}else if(a)for(f in this._data_.graph.subjects)l=this._data_.graph.subjects[f],l.predicates[a]&&e.push(r.toProjection(this,l,c));else for(f in this._data_.graph.subjects)l=this._data_.graph.subjects[f],e.push(r.toProjection(this,l,c));return e};r.prototype.merge=function(a,b){var c=b&&b.mergeBlankNodes?!0:!1,e=0;if(!c)for(var d in this._data_.graph.subjects){var f=/_:([0-9]+)/.exec(d);f&&(f=parseInt(f[1]),f>e&&(e=f))}if(a){var g={},c=c?function(a){return a}:function(a){var b=g[a];!b&&/_:([0-9]+)/.test(a)&&
(e++,b="_:"+e,g[a]=b);return b?b:a},f="undefined"!=typeof a.subjects?a.subjects:a;for(d in f){var k=c(d),h=f[d];d=k?k:d;if(k=this._data_.graph.subjects[d])for(var n in h.predicates){var p=h.predicates[n],r=k.predicates[n];if(r)for(var q=0;q<p.objects.length;q++){for(var x=p.objects[q],v=[],w=0;w<r.objects.length;w++)x.type!=m.XMLLiteralURI&&x.type!=m.HTMLLiteralURI||r.objects[w].type==x.type&&r.objects[w].value===x.value?r.objects[w].type==x.type&&r.objects[w].value!=x.value||v.push(x):v.push(x);
for(w=0;w<v.length;w++)v[w].type==m.objectURI&&(v[w].value=c(v[w].value)),r.objects.push(v[w])}else for(k.predicates[n]=p,q=0;q<p.objects.length;q++)p.objects[q].type==m.objectURI&&(p.objects[q].value=c(p.objects[q].value))}else for(n in this._data_.graph.subjects[d]=h,h.subject=d,h.predicates)for(p=h.predicates[n],q=0;q<p.objects.length;q++)p.objects[q].type==m.objectURI&&(p.objects[q].value=c(p.objects[q].value))}}if(b&&b.prefixes)for(var A in b.prefixes)this._data_.graph.prefixes[A]||(this._data_.graph.prefixes[A]=
b.prefixes[A])};Element.prototype.getElementsByType=function(){for(var a=[],b=0;b<arguments.length;b++)a.push(this.ownerDocument.data.graph.curieParser.parse(arguments[b],!1));var b=this.ownerDocument.createTreeWalker(this,NodeFilter.SHOW_ELEMENT,{acceptNode:function(b){if(!b.data)return NodeFilter.FILTER_SKIP;for(var c=0;c<a.length;c++)if(0<=b.data.types.indexOf(a[c]))return b.getAttributeNode("typeof")?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP;return NodeFilter.FILTER_SKIP}},!1),c=[];for(c.item=
function(a){return this[a]};b.nextNode();)c.push(b.currentNode);return c};Element.prototype.getFirstElementByType=function(){for(var a=[],b=0;b<arguments.length;b++)a.push(this.ownerDocument.data.graph.curieParser.parse(arguments[b],!1));b=this.ownerDocument.createTreeWalker(this,NodeFilter.SHOW_ELEMENT,{acceptNode:function(b){if(!b.data)return NodeFilter.FILTER_SKIP;for(var e=0;e<a.length;e++)if(0<=b.data.types.indexOf(a[e]))return b.getAttributeNode("typeof")?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP;
return NodeFilter.FILTER_SKIP}},!1);return b.nextNode()?b.currentNode:null};r.attach=function(a,b){Object.defineProperty(a,"data",{value:new r(b&&b.baseURI?b.baseURI:a.nodeType==Node.DOCUMENT_NODE?a.documentElement.baseURI:a.graph.baseURI),writable:!1,configurable:!1,enumerable:!0});a.getElementsByType=function(a){return this.getElementsByProperty("http://www.w3.org/1999/02/22-rdf-syntax-ns#type",a)};a.getElementsBySubject=function(a){var b=[];b.item=function(a){return this[a]};a=this.data._data_.graph.curieParser.parse(a,
!0);if(a=this.data._data_.graph.subjects[a])for(var d=0;d<a.origins.length;d++)b.push(a.origins[d]);return b};a.getElementsByProperty=function(a,b){var d=[];d.item=function(a){return this[a]};b&&(b=this.data._data_.graph.curieParser.parse(b,!1));var f="undefined"==typeof b;a=this.data._data_.graph.curieParser.parse(a,!0);for(var g in this.data._data_.graph.subjects){var k=this.data._data_.graph.subjects[g].predicates[a];if(k)for(var h=0;h<k.objects.length;h++)if(f||k.objects[h].value==b)Array.isArray(k.objects[h].origin)?
d.push.apply(d,k.objects[h].origin):d.push(k.objects[h].origin)}return d};a.getElementSubject=function(a){for(var b in this.data._data_.graph.subjects)if(0<=this.data._data_.graph.subjects[b].origins.indexOf(a))return b;return null}};g.prototype=new A;g.prototype.constructor=g;g.commentRE=/^#.*/;g.wsRE=/^\s+/;g.iriRE=/^\<((?:(?:[^\x00-\x20<>"{}|^`\\]|\\u[0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f]|\\U[0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f])*))\>/;g.singleQuoteLiteralRE=
/^'((?:[^'\n\r\\]*|\\'|\\)*)'/;g.doubleQuoteLiteralRE=/^\"((?:[^"\n\r\\]*|\\"|\\)*)\"/;g.longDoubleQuoteLiteralRE=/^\"\"\"((?:[^"\\]*|\\"|\\|\"(?!\")|\"\"(?!\"))*)\"\"\"/;g.longSingleQuoteLiteralRE=/^'''((?:[^'\\]*|\\'|\\|'(?!')|''(?!'))*)'''/;g.typeRE=/^\^\^/;g.dotRE=/^\./;g.openSquareBracketRE=/^\[/;g.closeSquareBracketRE=/^\]/;g.prefixRE=/^((?:(?:[A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\ud800-\udfff][\ud800-\udfff])(?:(?:[A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\ud800-\udfff][\ud800-\udfff]|[_\.\-\u00B7]|[0-9]|[\u0300-\u036F]|[\u203F-\u2040])*(?:[A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\ud800-\udfff][\ud800-\udfff]|[_\-\u00B7]|[0-9]|[\u0300-\u036F]|[\u203F-\u2040]))?)?):/;
g.blankNodeRE=/^(_:)/;g.localNameRE=/^((?:[A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\ud800-\udfff][\ud800-\udfff]|[_:]|[0-9]|%[0-9A-Fa-f][0-9A-Fa-f]|\\[_~\.\-!$&'()*+,;=\/?#@%])(?:(?:[A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\ud800-\udfff][\ud800-\udfff]|[_\-\.:\u00b7]|[\u0300-\u036F]|[\u203F-\u2040]|[0-9]|%[0-9A-Fa-f][0-9A-Fa-f]|\\[_~\.\-!$&'()*+,;=/?#@%])*(?:[A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\ud800-\udfff][\ud800-\udfff]|[_\-:\u00b7]|[\u0300-\u036F]|[\u203F-\u2040]|[0-9]|%[0-9A-Fa-f][0-9A-Fa-f]|\\[_~\.\-!$&'()*+,;=/?#@%]))?)/;
g.langRE=/^@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*)/;g.prefixIDRE=/^@prefix/;g.baseRE=/^@base/;g.sparqlPrefixRE=/^[Pp][Rr][Ee][Ff][Ii][Xx]/;g.sparqlBaseRE=/^[Bb][Aa][Ss][Ee]/;g.semicolonRE=/^;/;g.commaRE=/^,/;g.aRE=/^a/;g.openParenRE=/^\(/;g.closeParenRE=/^\)/;g.integerRE=/^([+-]?[0-9]+)/;g.decimalRE=/^([+-]?[0-9]*\.[0-9]+)/;g.doubleRE=/^([+-]?(?:[0-9]+\.[0-9]*[eE][+-]?[0-9]+|\.[0-9]+[eE][+-]?[0-9]+|[0-9]+[eE][+-]?[0-9]+))/;g.booleanRE=/^(true|false)/;g.typeURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#type";
g.objectURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#object";g.plainLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#PlainLiteral";g.nilURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#nil";g.firstURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#first";g.restURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#rest";g.xsdStringURI="http://www.w3.org/2001/XMLSchema#string";g.xsdIntegerURI="http://www.w3.org/2001/XMLSchema#integer";g.xsdDecimalURI="http://www.w3.org/2001/XMLSchema#decimal";g.xsdDoubleURI=
"http://www.w3.org/2001/XMLSchema#double";g.xsdBooleanURI="http://www.w3.org/2001/XMLSchema#boolean";g.prototype.reset=function(){this.context=new E;this.errorCount=0;this.lineNumber=1};g.dumpGraph=function(a){for(var b in a)console.log(a[b].toString())};g.prototype._match=function(a,b){var c=a.exec(b);return c?{text:c[0],remaining:b.substring(c[0].length),values:1<c.length?c.splice(1):null}:null};g.prototype._trim=function(a){var b=null;do{if(b=g.wsRE.exec(a))this.lineNumber+=b[0].split(/\n/).length-
1,a=a.substring(b[0].length);(b=g.commentRE.exec(a))&&(a=a.substring(b[0].length))}while(b);return a};g.prototype.reportError=function(a){this.onError(this.lineNumber,a)};g.prototype.parse=function(a,b){b&&(this.context.baseURI=this.parseURI(b));for(;0<a.length;)a=this._trim(a),0<a.length&&(a=this.parseStatement(a))};g.prototype.parseStatement=function(a){var b=this._match(g.prefixIDRE,a);if(b){var c=this._trim(b.remaining),b=this.parsePrefixName(c);if(!b)return this.reportError("Cannot parse prefix after @prefix: "+
a.substring(20)+"..."),this.errorCount++,c;a=b.prefix;c=this._trim(b.remaining);b=this.parseIRIReference(c);if(!b)return this.reportError("Cannot parse IRI after @prefix: "+c.substring(20)+"..."),this.errorCount++,c;this.context.prefixes[a]=this.context.baseURI?this.context.baseURI.resolve(b.iri):b.iri;try{this.parseURI(this.context.prefixes[a])}catch(e){this.reportError(e.toString()),this.errorCount++}c=this._trim(b.remaining);if(b=this._match(g.dotRE,c))return b.remaining;this.reportError("Missing end . for @prefix statement.  Found: "+
c.substring(0,20)+"...");this.errorCount++;return c}if(b=this._match(g.baseRE,a)){c=this._trim(b.remaining);b=this.parseIRIReference(c);if(!b)return this.reportError("Cannot parse IRI after @base: "+c.substring(0,20)+"..."),this.errorCount++,c;try{this.context.baseURI=this.context.baseURI?this.parseURI(this.context.baseURI.resolve(b.iri)):this.parseURI(b.iri)}catch(d){this.reportError(d+"; IRI: "+b.iri),this.errorCount++}c=this._trim(b.remaining);if(b=this._match(g.dotRE,c))return b.remaining;this.reportError("Missing end . for @base statement.  Found: "+
c.substring(0,20)+"...");this.errorCount++;return c}if(b=this._match(g.sparqlPrefixRE,a)){c=this._trim(b.remaining);b=this.parsePrefixName(c);if(!b)return this.reportError("Cannot parse prefix after PREFIX: "+a.substring(0,20)+"..."),this.errorCount++,c;a=b.prefix;c=this._trim(b.remaining);b=this.parseIRIReference(c);if(!b)return this.reportError("Cannot parse IRI after PREFIX: "+c.substring(0,20)+"..."),this.errorCount++,c;this.context.prefixes[a]=this.context.baseURI?this.context.baseURI.resolve(b.iri):
b.iri;try{this.parseURI(this.context.prefixes[a])}catch(f){this.reportError(f.toString()),this.errorCount++}return b.remaining}if(b=this._match(g.sparqlBaseRE,a)){c=this._trim(b.remaining);b=this.parseIRIReference(c);if(!b)return this.reportError("Cannot parse IRI after BASE: "+c.substring(0,20)+"..."),this.errorCount++,c;try{this.context.baseURI=this.context.baseURI?this.parseURI(this.context.baseURI.resolve(b.iri)):this.parseURI(b.iri)}catch(l){this.reportError(l+"; IRI: "+b.iri),this.errorCount++}return b.remaining}a=
this.parseTriples(a);a=this._trim(a);if(b=this._match(g.dotRE,a))return b.remaining;this.reportError("Missing end . triples.  Found: "+a.substring(0,20)+"...");this.errorCount++;return a};g.prototype.parseTriples=function(a){var b=this.parseIRI(a);if(b||(b=this.parseBlankNode(a)))return this.parsePredicateObjectList(b.iri,this._trim(b.remaining));if(b=this._match(g.openParenRE,a)){a=null;var c=b.remaining,e=null;do{c=this._trim(c);if(b=this._match(g.closeParenRE,c)){c=b.remaining;e?this.addTriple(e,
g.restURI,{type:g.objectURI,value:g.nilURI}):a=this.context.newBlankNode();break}b=this.context.newBlankNode();e?this.addTriple(e,g.restURI,{type:g.objectURI,value:b}):a=b;e=b;c=this.parseObject(e,g.firstURI,c)}while(0<c.length);return this.parsePredicateObjectList(a,this._trim(c))}return(b=this._match(g.openSquareBracketRE,a))?(a=this.context.newBlankNode(),c=this._trim(b.remaining),(b=this._match(g.closeSquareBracketRE,c))?c=b.remaining:(c=this.parsePredicateObjectList(a,c),(b=this._match(g.closeSquareBracketRE,
this._trim(c)))?c=b.remaining:this.reportError("Missing end square bracket ']'.")),this.parsePredicateObjectList(a,this._trim(c),!0)):b?this.parsePredicateObjectList(b.iri,this._trim(b.remaining)):(this.reportError("Terminating: Cannot parse at "+a.substring(0,20)+" ..."),this.errorCount++,"")};g.prototype.parsePredicateObjectList=function(a,b,c){var e=!0,d=null;do{var f=this.parseIRI(b);!f&&(f=this._match(g.aRE,b))&&(f.iri=g.typeURI);if(!f){if(c)return b;this.reportError("Terminating: Cannot parse predicate IRI.");
this.errorCount++;return""}d=this.parseObjectList(a,f.iri,this._trim(f.remaining));if(f=this._match(g.semicolonRE,this._trim(d))){do b=this._trim(f.remaining),f=this._match(g.semicolonRE,b);while(f);c=!0}else e=!1}while(e);return d};g.prototype.parseObjectList=function(a,b,c){var e=!0,d=null;do{var d=this.parseObject(a,b,c),f=this._match(g.commaRE,this._trim(d));f?c=this._trim(f.remaining):e=!1}while(e);return d};g.prototype.parseObject=function(a,b,c){var e=this.parseIRI(c);if(e||(e=this.parseBlankNode(c)))return this.addTriple(a,
b,{type:g.objectURI,value:e.iri}),e.remaining;if(e=this._match(g.openParenRE,c)){var d=a,f=b,l=e.remaining;do{l=this._trim(l);if(e=this._match(g.closeParenRE,l))return this.addTriple(d,d==a?b:g.restURI,{type:g.objectURI,value:g.nilURI}),e.remaining;e=this.context.newBlankNode();d==a?this.addTriple(a,b,{type:g.objectURI,value:e}):this.addTriple(d,g.restURI,{type:g.objectURI,value:e});d=e;f=g.firstURI;l=this.parseObject(d,f,l)}while(0<l.length)}if(e=this._match(g.openSquareBracketRE,c)){c=this.context.newBlankNode();
this.addTriple(a,b,{type:g.objectURI,value:c});l=this.parsePredicateObjectList(c,this._trim(e.remaining),!0);l=this._trim(l);if(e=this._match(g.closeSquareBracketRE,l))return e.remaining;this.reportError("Missing close square bracket ']' for blank node "+c+" predicate object list");this.errorCount++;return l}if(e=this.parseLiteral(c))return l=e.literal,"http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral"==e.type?(l="<root>"+e.literal+"</root>",c=new DOMParser,l=c.parseFromString(l,"application/xml"),
l=l.documentElement.childNodes):"http://www.w3.org/1999/02/22-rdf-syntax-ns#HTML"==e.type&&(l="<html><head/><body>"+e.literal+"</body></html>",c=new DOMParser,l=c.parseFromString(l,"text/html"),l=l.body.childNodes),this.addTriple(a,b,{type:e.type?e.type:g.plainLiteralURI,value:l,language:e.language}),e.remaining;this.reportError("Terminating: Cannot parse literal at "+c.substring(0,20));this.errorCount++;return""};g.prototype.parsePrefixName=function(a){if(a=this._match(g.prefixRE,a))a.prefix=a.values[0];
return a};g.prototype.parseIRIReference=function(a){if(a=this._match(g.iriRE,a))a.iri=g.expandURI(a.values[0]);return a};g.prototype.parseIRI=function(a){var b=this._match(g.iriRE,a);if(b){a=g.expandURI(b.values[0]);b.iri=this.context.baseURI?this.context.baseURI.resolve(a):a;try{this.parseURI(b.iri)}catch(c){this.reportError(c.toString()),this.errorCount++}return b}if(b=this._match(g.prefixRE,a)){var e=b.values[0];a=this.context.prefixes[e];if(!a)return this.reportError("No prefix mapping for "+
e),this.errorCount++,null;e=b.remaining;if(b=this._match(g.localNameRE,e)){b.iri=a+g.expandName(b.values[0]);try{this.parseURI(b.iri)}catch(d){this.reportError(d.toString()),this.errorCount++}return b}return{iri:a,remaining:e}}return null};g.prototype.parseBlankNode=function(a){if(a=this._match(g.blankNodeRE,a))if(a=this._match(g.localNameRE,a.remaining))return a.iri="_:"+g.expandName(a.values[0]),a;return null};g.prototype.parseLiteral=function(a){var b=this._match(g.longDoubleQuoteLiteralRE,a);
b||(b=this._match(g.longSingleQuoteLiteralRE,a));b||(b=this._match(g.singleQuoteLiteralRE,a));b||(b=this._match(g.doubleQuoteLiteralRE,a));if(b){a=null;try{a=g.expandLiteral(b.values[0])}catch(c){this.reportError(c.toString()),this.errorCount++}var e=b.remaining;if(b=this._match(g.langRE,e))return b.literal=a,b.language=b.values[0],b;if(b=this._match(g.typeRE,e)){e=b.remaining;if(b=this.parseIRI(e))return b.literal=a,b.type=b.iri,b;this.reportError("Missing type URI after ^^");this.errorCount++}return{literal:a,
remaining:e}}return(b=this._match(g.doubleRE,a))?(b.literal=b.values[0],b.type=g.xsdDoubleURI,b):(b=this._match(g.decimalRE,a))?(b.literal=b.values[0],b.type=g.xsdDecimalURI,b):(b=this._match(g.integerRE,a))?(b.literal=b.values[0],b.type=g.xsdIntegerURI,b):(b=this._match(g.booleanRE,a))?(b.literal=b.values[0],b.type=g.xsdBooleanURI,b):null};g.prototype.newSubject=function(a){var b=this.context.subjects[a];b||(b=new C(this.context,a),this.context.subjects[a]=b);return b};g.expandHex=function(a){for(var b=
a.split(/[0-9A-Fa-f]+/),c=0;c<b.length;c++)if(0<b[c].length)throw"Bad hex in escape: "+a;b=parseInt(a,16);if(isNaN(b))throw"Bad hex in escape: "+a;if(65536>b)return String.fromCharCode(b);a=b-65536;b=a&1023;return String.fromCharCode((a>>10)+55296)+String.fromCharCode(b+56320)};g.escapedSequenceRE=/(\\t|\\b|\\n|\\r|\\f|\\"|\\'|\\\\|(?:\\U[0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f])|(?:\\u[0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f]))/;g.expandLiteral=function(a){a=
a.split(g.escapedSequenceRE);for(var b="",c=0;c<a.length;c++)if(0!=a[c].length)if("\\t"==a[c])b+="\t";else if("\\b"==a[c])b+="\b";else if("\\n"==a[c])b+="\n";else if("\\r"==a[c])b+="\r";else if("\\f"==a[c])b+="\f";else if('\\"'==a[c])b+='"';else if("\\'"==a[c])b+="'";else if("\\\\"==a[c])b+="\\";else if(6==a[c].length&&"\\"==a[c].charAt(0)&&"u"==a[c].charAt(1))b+=g.expandHex(a[c].substring(2));else if(10==a[c].length&&"\\"==a[c].charAt(0)&&"U"==a[c].charAt(1))b+=g.expandHex(a[c].substring(2));else{var e=
a[c].substring(0,2);if(2==e.length&&"\\U"==e)throw"Bad hex in \\U escape "+a[c].substring(0,10);if(2==e.length&&"\\u"==e)throw"Bad hex in \\u escape "+a[c].substring(0,6);e=a[c].indexOf("\\");if(0<=e)throw"Bad escape "+a[c].substring(e,e+2);b+=a[c]}return b};g.escapedURIRE=/((?:\\U[0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f])|(?:\\u[0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f]))/;g.expandURI=function(a){a=a.split(g.escapedURIRE);for(var b="",c=0;c<a.length;c++)if(0!=
a[c].length)if(6==a[c].length&&"\\"==a[c].charAt(0)&&"u"==a[c].charAt(1))b+=g.expandHex(a[c].substring(2));else if(10==a[c].length&&"\\"==a[c].charAt(0)&&"U"==a[c].charAt(1))b+=g.expandHex(a[c].substring(2));else{var e=a[c].substring(0,2);if(2==e.length&&"\\U"==e)throw"Bad hex in \\U escape "+a[c].substring(0,10);if(2==e.length&&"\\u"==e)throw"Bad hex in \\u escape "+a[c].substring(0,6);e=a[c].indexOf("\\");if(0<=e)throw"Bad escape "+a[c].substring(e,e+2);b+=a[c]}return b};g.escapedNameCharRE=/(\\[_~\.\-!$&'()*+,;=/?#@%])/;
g.expandName=function(a){a=a.split(g.escapedNameCharRE);for(var b="",c=0;c<a.length;c++)0!=a[c].length&&(b="\\"==a[c].charAt(0)?b+a[c].charAt(1):b+a[c]);return b};g.prototype.addTriple=function(a,b,c){a=this.newSubject(a);var e=a.predicates[b];e||(e=new D(b),a.predicates[b]=e);e.objects.push(c);b==g.typeURI&&a.types.push(c.value)};n.prototype=new A;n.prototype.constructor=n;n.absoluteURIRE=/[\w\_\-]+:\S+/;n.prototype.newBlankNode=function(){this.blankCounter++;return"_:"+this.blankCounter};n.prototype.createBaseURI=
function(a){var b=a.indexOf("#");0<=b&&(a=a.substring(0,b));return this.parseURI(a)};n.trim=function(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")};n.tokenize=function(a){return n.trim(a).split(/\s+/)};n.prototype.getVocabulary=function(a){for(var b=0;b<this.vocabularies.length;b++)if(this.vocabularies[b].isMember(a))return this.vocabularies[b];var b=function(a){return{namespaceURI:a,getProperty:function(a){return this.namespaceURI+a}}},c=a.indexOf("#");if(0<=c)return b(a.substring(0,c+1));
c=a.lastIndexOf("/");return 0<=c?b(a.substring(0,c+1)):b(a)};n.prototype.getProperty=function(a,b){return n.absoluteURIRE.exec(a)?a:b?b.getProperty(a):null};n.valueMappings={meta:function(a,b){return a.getAttribute("content")},audio:function(a,b){return b.resolve(a.getAttribute("src"))},a:function(a,b){return b.resolve(a.getAttribute("href"))},object:function(a,b){return b.resolve(a.getAttribute("data"))},time:function(a,b){var c=a.getAttribute("datetime");return c?c:a.textContent}};n.valueMappings.embed=
n.valueMappings.audio;n.valueMappings.iframe=n.valueMappings.audio;n.valueMappings.img=n.valueMappings.audio;n.valueMappings.source=n.valueMappings.audio;n.valueMappings.track=n.valueMappings.audio;n.valueMappings.video=n.valueMappings.audio;n.valueMappings.area=n.valueMappings.a;n.valueMappings.link=n.valueMappings.a;n.prototype.getValue=function(a,b){var c=n.valueMappings[a.localName];return c?c(a,b):a.textContent};n.objectURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#object";n.PlainLiteralURI=
"http://www.w3.org/1999/02/22-rdf-syntax-ns#PlainLiteral";n.typeURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#type";n.prototype.process=function(a){a.nodeType==Node.DOCUMENT_NODE&&(a=a.documentElement);var b=[];for(b.push({current:a,context:this.push(null,null)});0<b.length;){var c=b.shift();a=c.current;var c=c.context,e=this.createBaseURI(a.baseURI),d=null,f=c.vocabulary,g=a.hasAttribute("itemscope");if(g){var k=a.getAttribute("itemtype"),h=a.getAttribute("itemid");k&&(f=this.getVocabulary(k),
d=h?h:this.newBlankNode(),this.newSubjectOrigin(a,d),this.addTriple(a,d,n.typeURI,{type:n.objectURI,value:k}))}if(k=a.getAttribute("itemprop"))if(k=n.tokenize(k),g)c.parent.subject&&d&&this.addTriple(a,c.subject,m,{type:n.objectURI,value:d});else if(f&&(d||(d=c.subject),d))for(e=this.getValue(a,e),g=0;g<k.length;g++){var m=0<k[g].length?this.getProperty(k[g],f):null;m&&this.addTriple(a,d,m,{type:n.PlainLiteralURI,value:e})}for(a=a.lastChild;a;a=a.previousSibling)a.nodeType==Node.ELEMENT_NODE&&b.unshift({current:a,
context:this.push(c,d,f)})}};n.prototype.push=function(a,b,c){return{parent:a,subject:b?b:a?a.subject:null,vocabulary:c?c:a?a.vocabulary:null}};n.prototype.newSubjectOrigin=function(a,b){};n.prototype.addTriple=function(a,b,c,e){};O.prototype=new n;O.prototype.constructor=n;O.prototype.newBlankNode=function(){return this.graph.newBlankNode()};O.prototype.newSubjectOrigin=function(a,b){var c=this.graph.subjects[b];c||(c=new C(this.graph,b),this.graph.subjects[b]=c);a.data||Object.defineProperty(a,
"data",{value:c,writable:!1,configurable:!0,enumerable:!0})};O.prototype.addTriple=function(a,b,c,e){var d=this.graph.subjects[b];d||(d=new C(this.graph,b),this.graph.subjects[b]=d);b=d.predicates[c];b||(b=new D(c),d.predicates[c]=b);for(var f=0;f<b.objects.length;f++)if(b.objects[f].type==e.type&&b.objects[f].value==e.value){b.objects[f].origin!==a&&(Array.isArray(b.objects[f].origin)||(c=[],c.push(b.objects[f].origin),b.objects[f].origin=c),b.objects[f].origin.push(a));return}b.objects.push(e);
e.origin=a;c==n.typeURI&&d.types.push(e.value)};var J={attach:function(a,b){var c=a.implementation.hasFeature;a.implementation.hasFeature=function(a,b){return"RDFaAPI"==a&&"1.1"==b?!0:c.apply(this,arguments)};var e=a.data?!0:!1;if(a.data)a.data._data_&&a.data._data_.graph.clear();else{r.attach(a,b);var d=function(a){a.id||(a.id="R"+Date.now());return new CustomEvent("green-turtle-response",{detail:a})};window.addEventListener("green-turtle-request",function(b){if("status"==b.detail.type)b={type:"status",
version:GreenTurtle.version,loaded:e,count:a.data.graph.tripleCount,id:b.detail.id},window.dispatchEvent(d(b));else if("get-subjects"==b.detail.type){var c=a.data.getSubjects();b={type:"subjects",subjects:c,id:b.detail.id};window.dispatchEvent(d(b))}else if("get-subject"==b.detail.type){var f=null,g=b.detail.subject;if(a.data.getSubject)f=(c=a.data.getSubject(g))?c.toObject():null;else for(var f={subject:g,predicates:{}},m=a.data.getProjection(g),n=m.getProperties(),q=0;q<n.length;q++){var r=[];f.predicates[n[q]]=
{predicate:predicate,objects:r};for(var v=m.getAll(n[q]),w=0;w<v.length;w++)c[v[w]]?r.push({type:"http://www.w3.org/1999/02/22-rdf-syntax-ns#object",value:v[w]}):r.push({type:"http://www.w3.org/1999/02/22-rdf-syntax-ns#PlainLiteral",value:v[w]})}b={type:"subject",subject:g,triples:f,id:b.detail.id};window.dispatchEvent(d(b))}else console.log("Unrecognized message: "+JSON.stringify(b.detail))},!1)}var f=function(){var c=new v(a.data._data_);c.finishedHandlers.push(function(c){for(var d in J.processors)J.processors[d].process(a,
b)});c.finishedHandlers.push(function(a){if(a.ownerDocument){var b=a.ownerDocument.createEvent("HTMLEvents");b.initEvent("rdfa.loaded",!0,!0);a.ownerDocument.dispatchEvent(b)}});c.process(a.documentElement,b);e=!0};"loading"==a.readyState?window.addEventListener("load",function(){f()},!1):f()},parse:function(a,b,c){var e=this.processors[b];if(!e)throw"Unsupported media type "+b;e=e.createParser();c&&c.errorHandler&&(e.onError=c.errorHandler);c=c?c.baseURI:null;e.parse(a,c);if(0<e.errorCount)throw c?
"Errors during parsing "+c+" of type "+b:"Errors during parsing of type "+b;return e.context},createDocumentData:function(a){return new r(a?a:window?window.location.href:"about:blank")}};Object.defineProperty(J,"processors",{value:{},writable:!1,configurable:!1,enumerable:!0});J.processors["text/turtle"]={createParser:function(){return new g},process:function(a,b){if(this.enabled){var c=a.nodeType==Node.DOCUMENT_NODE?a:a.ownerDocument;if(c.data){for(var e=!0,d=c.getElementsByTagNameNS("http://www.w3.org/1999/xhtml",
"script"),f=0;f<d.length;f++)if("text/turtle"==d[f].getAttribute("type")){var g=this.createParser();b&&b.errorHandler&&(g.onError=b.errorHandler);g.parse(d[f].textContent,b?b.baseURI:null);0<g.errorCount?e=!1:c.data.merge(g.context.subjects,{prefixes:g.context.prefixes})}return e}}},enabled:!0};J.processors.microdata={process:function(a,b){if(this.enabled){var c=a.nodeType==Node.DOCUMENT_NODE?a:a.ownerDocument;if(!c.data)return!1;(new O(c.data.graph)).process(a);return!0}},enabled:!1};Object.defineProperty(R,
"implementation",{value:J,writable:!1,configurable:!1,enumerable:!0});R.attach=function(a,b){J.attach(a,b)};return R}();GreenTurtle.attach(document);
