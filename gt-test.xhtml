<?xml-stylesheet href="http://pulcams.github.io/xsltforms/build/xsltforms.xsl" type="text/xsl"?><?xsltforms-options debug="no"?><?css-conversion no?><?xml-model href="http://www.oxygenxml.com/1999/xhtml/xhtml-xforms.nvdl" schematypens="http://purl.oclc.org/dsdl/nvdl/ns/structure/1.0"?>
<html    
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:cwb="http://example.org/cwb/"
    xmlns:ev="http://www.w3.org/2001/xml-events"
    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
    xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
    xmlns:xf="http://www.w3.org/2002/xforms"
    xmlns:xi="http://www.w3.org/2001/XInclude"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <head>
        <meta
            content="IE=edge"
            http-equiv="X-UA-Compatible" />
        <title>Cataloger's Workbench Editor</title>
        <script type="text/javascript">            
            //<![CDATA[
			(function () {
				if (typeof Document !== "undefined") {
					Document.prototype.baseURI = window.location.href;		
					Element.prototype.baseURI = window.location.href;		
				} 
				console.log(document.baseURI);
			})();//]]>
        </script>
        <script src="resources/js/jquery/jquery-1.11.3.min.js" type="text/javascript"></script>
        <script src="resources/js/green-turtle/RDFa.1.3.0.js" type="text/javascript"></script>
        
        <script type="text/javascript">            
            //<![CDATA[
			GreenTurtle.attach(document);//]]>
        </script>
        <xf:model
            id="rdf-model">
            <xf:instance
                id="sparql-query">
                <cwb:data>
                    <query
                        xmlns="">
                        <![CDATA[
                            DESCRIBE * WHERE {?s ?p ?o} ORDER BY ?p
                        ]]>
                    </query>
                </cwb:data>
            </xf:instance>
            <xf:instance
                id="result">
                <cwb:data>
                    <cwb:result>
                        <cwb:replace></cwb:replace>
                        <cwb:var></cwb:var>
                    </cwb:result>
                </cwb:data>
            </xf:instance>
            <xf:submission
                cdata-section-elements=""
                encoding="UTF-8"
                id="rq"
                instance="result"
                method="get"
                ref="instance('sparql-query')/query"
                replace="text"
                resource="/turtle"
                serialize="none"
                targetref="cwb:result/cwb:replace">
                <xf:header
                    combine="replace">
                    <xf:name>Accept</xf:name>
                    <xf:value>text/turtle</xf:value>
                </xf:header>
            </xf:submission>
            
        </xf:model>
    </head>
    <body
        prefix="rdf: http://www.w3.org/1999/02/22-rdf-syntax-ns# bf: http://bibframe.org/vocab/ ex: http://example.org/ test: http://test.org/ dbpprop:	http://dbpedia.org/property/">
        <div
            class="container">
            <div
                class="header">
                <h1
                    about="http://example.org/cwb"
                    property="bf:title">Cataloger's Workbench</h1>
                <xf:var
                    name="test"
                    value="'test'"></xf:var>
                <xf:trigger
                    id="update-resources">
                    <xf:label>Query</xf:label>
                    <xf:action
                        ev:event="DOMActivate">
                        <xf:send
                            submission="rq"></xf:send>
                        
                        <xf:action
                            ev:event="xforms-submit-done">
                            <xf:load
                                resource="turtle-test.xhtml"
                                show="embed"
                                targetid="subform"></xf:load>
                            
                            <xf:load
                                resource="javascript:GreenTurtle.attach(document);"></xf:load>
                            <xf:var
                                name="test"
                                value="'test2'"></xf:var>
                            
                            <xf:setvalue ref="instance('result')/cwb:result/cwb:var" value="$test"></xf:setvalue>
                        </xf:action>
                        <!--<xf:load
                            resource="turtle-test.xhtml"
                            show="embed"
                            targetid="subform"></xf:load>
                        <xf:load
                            resource="javascript:document.data.implementation.attach(document);"></xf:load>-->
                    </xf:action>
                </xf:trigger>
            </div>
            <!-- <xf:group
                id="query-output">
                <pre>
                    <xf:output value="instance('result')/cwb:result/cwb:replace"></xf:output>
                </pre>
            </xf:group>-->
            <xf:group
                id="subform"> </xf:group>
        </div>
        <script type="text/javascript">
            //<![CDATA[
//]]>            
        </script>
    </body>
</html>